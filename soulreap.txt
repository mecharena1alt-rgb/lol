--// SERVICES
local players = game:GetService("Players")
local replicated_storage = game:GetService("ReplicatedStorage")
local user_input_service = game:GetService("UserInputService")
local player = players.LocalPlayer

--// FIND MODULE (Targeting specific path you gave)
local ability_folder = replicated_storage:WaitForChild("Ability")
local config_script = ability_folder:WaitForChild("AbilityConfig")
local config = require(config_script)

--// SAVE ORIGINAL VALUES
local original = {
    SoulLifetime = config.SoulLifetime,
    SoulReapTime = config.SoulReapTime
}

--// STATE
local mods_enabled = false

--// UI CONSTRUCTION
local gui = Instance.new("ScreenGui")
gui.Name = "SoulModUI"
gui.ResetOnSpawn = false -- keeps gui alive after death
gui.Parent = player:WaitForChild("PlayerGui")

local frame = Instance.new("Frame")
frame.Size = UDim2.fromScale(0.25, 0.20) -- smaller since less buttons
frame.Position = UDim2.fromScale(0.1, 0.1)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
frame.Active = true
frame.Draggable = true
frame.Parent = gui

local ui_corner = Instance.new("UICorner")
ui_corner.CornerRadius = UDim.new(0, 12)
ui_corner.Parent = frame

-- TITLE
local title = Instance.new("TextLabel")
title.Text = "SOUL MODIFIER"
title.Size = UDim2.fromScale(1, 0.3)
title.BackgroundTransparency = 1
title.TextColor3 = Color3.new(1, 1, 1)
title.Font = Enum.Font.GothamBold
title.TextScaled = true
title.Parent = frame

-- BUTTON MAKER
local function make_button(text, pos)
    local b = Instance.new("TextButton")
    b.Size = UDim2.fromScale(0.8, 0.4)
    b.Position = pos
    b.Text = text
    b.Font = Enum.Font.Gotham
    b.TextScaled = true
    b.BackgroundColor3 = Color3.fromRGB(200, 50, 50) -- red default
    b.TextColor3 = Color3.new(1, 1, 1)
    
    local b_corner = Instance.new("UICorner")
    b_corner.CornerRadius = UDim.new(0, 8)
    b_corner.Parent = b
    
    b.Parent = frame
    return b
end

local toggle_btn = make_button("Soul Mods: OFF", UDim2.fromScale(0.1, 0.45))

--// LOGIC
toggle_btn.MouseButton1Click:Connect(function()
    mods_enabled = not mods_enabled
    
    if mods_enabled then
        -- set to 9999
        config.SoulLifetime = 9999
        config.SoulReapTime = 9999
        
        toggle_btn.Text = "Soul Mods: ON"
        toggle_btn.BackgroundColor3 = Color3.fromRGB(50, 200, 50) -- green
    else
        -- restore originals
        config.SoulLifetime = original.SoulLifetime
        config.SoulReapTime = original.SoulReapTime
        
        toggle_btn.Text = "Soul Mods: OFF"
        toggle_btn.BackgroundColor3 = Color3.fromRGB(200, 50, 50) -- red
    end
end)

--// VISIBILITY TOGGLE (P KEY)
user_input_service.InputBegan:Connect(function(input, game_processed)
    if game_processed then return end -- ignore if typing in chat
    
    if input.KeyCode == Enum.KeyCode.P then
        frame.Visible = not frame.Visible
    end
end)

print("soul modifier loaded. press P to toggle gui.")
