--// SERVICES
local Players = game:GetService("Players")
local player = Players.LocalPlayer



--// FIND AbilityConfig MODULE
local function findModule()
	local rs = game:GetService("ReplicatedStorage")
	if rs:FindFirstChild("Modules") and rs.Modules:FindFirstChild("AbilityConfig") then
		return rs.Modules.AbilityConfig
	end
	return rs:FindFirstChild("AbilityConfig", true)
end

local configScript = findModule()
if not configScript then
	warn("AbilityConfig not found")
	return
end

local config = require(configScript)

--// SAVE ORIGINAL VALUES
local original = {
	SprintBoost = config.SprintBoost,
	SprintTime = config.SprintTime,
	SprintCooldown = config.SprintCooldown,
	DashCooldown = config.DashCooldown
}

--// STATE
local sprintEnabled = false
local dashEnabled = false
local sprintBoostValue = 7
local sprintDurationValue = 5 -- âœ… DEFAULT = 5

--// UI
local gui = Instance.new("ScreenGui")
gui.Name = "AdminAbilityUI"
gui.ResetOnSpawn = false
gui.Parent = player.PlayerGui

local frame = Instance.new("Frame")
frame.Size = UDim2.fromScale(0.25, 0.36)
frame.Position = UDim2.fromScale(0.375, 0.32)
frame.BackgroundColor3 = Color3.fromRGB(30,30,30)
frame.Active = true
frame.Draggable = true
frame.Parent = gui

Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 12)

-- TITLE
local title = Instance.new("TextLabel")
title.Text = "ADMIN ABILITIES"
title.Size = UDim2.fromScale(1, 0.16)
title.BackgroundTransparency = 1
title.TextColor3 = Color3.new(1,1,1)
title.Font = Enum.Font.GothamBold
title.TextScaled = true
title.Parent = frame

-- HELPERS
local function makeBox(text, pos, placeholder)
	local box = Instance.new("TextBox")
	box.Size = UDim2.fromScale(0.8, 0.12)
	box.Position = pos
	box.Text = text
	box.PlaceholderText = placeholder
	box.ClearTextOnFocus = false
	box.Font = Enum.Font.Gotham
	box.TextScaled = true
	box.BackgroundColor3 = Color3.fromRGB(45,45,45)
	box.TextColor3 = Color3.new(1,1,1)
	Instance.new("UICorner", box).CornerRadius = UDim.new(0,8)
	box.Parent = frame
	return box
end

local function makeButton(text, pos)
	local b = Instance.new("TextButton")
	b.Size = UDim2.fromScale(0.8, 0.12)
	b.Position = pos
	b.Text = text
	b.Font = Enum.Font.Gotham
	b.TextScaled = true
	b.BackgroundColor3 = Color3.fromRGB(60,60,60)
	b.TextColor3 = Color3.new(1,1,1)
	Instance.new("UICorner", b).CornerRadius = UDim.new(0,8)
	b.Parent = frame
	return b
end

-- UI ELEMENTS
local sprintBoostBox = makeBox("7", UDim2.fromScale(0.1, 0.20), "Sprint Boost")
local sprintTimeBox  = makeBox("5", UDim2.fromScale(0.1, 0.34), "Sprint Duration")

local sprintBtn = makeButton("Sprint: OFF", UDim2.fromScale(0.1, 0.50))
local dashBtn   = makeButton("Dash: OFF",   UDim2.fromScale(0.1, 0.66))

-- LIVE SYNC
sprintBoostBox.FocusLost:Connect(function()
	local num = tonumber(sprintBoostBox.Text)
	if num then
		sprintBoostValue = math.clamp(num, 1, 50)
		sprintBoostBox.Text = tostring(sprintBoostValue)
		if sprintEnabled then
			config.SprintBoost = sprintBoostValue
		end
	else
		sprintBoostBox.Text = tostring(sprintBoostValue)
	end
end)

sprintTimeBox.FocusLost:Connect(function()
	local num = tonumber(sprintTimeBox.Text)
	if num then
		sprintDurationValue = math.clamp(num, 0.5, 30)
		sprintTimeBox.Text = tostring(sprintDurationValue)
		if sprintEnabled then
			config.SprintTime = sprintDurationValue
		end
	else
		sprintTimeBox.Text = tostring(sprintDurationValue)
	end
end)

-- SPRINT TOGGLE
sprintBtn.MouseButton1Click:Connect(function()
	sprintEnabled = not sprintEnabled
	if sprintEnabled then
		config.SprintBoost = sprintBoostValue
		config.SprintTime = sprintDurationValue
		config.SprintCooldown = 0
		sprintBtn.Text = "Sprint: ON"
	else
		config.SprintBoost = original.SprintBoost
		config.SprintTime = original.SprintTime
		config.SprintCooldown = original.SprintCooldown
		sprintBtn.Text = "Sprint: OFF"
	end
end)

-- DASH TOGGLE (UNCHANGED)
dashBtn.MouseButton1Click:Connect(function()
	dashEnabled = not dashEnabled
	if dashEnabled then
		config.DashCooldown = 0
		dashBtn.Text = "Dash: ON"
	else
		config.DashCooldown = original.DashCooldown
		dashBtn.Text = "Dash: OFF"
	end
end)

print("Admin sprint duration + boost synced correctly")
